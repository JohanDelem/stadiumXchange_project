{% extends 'base.html.twig' %}

{% block title %}Stadium Xchange{% endblock %}

{% block body %}
{# {{dump(teamsLogo)}} #}
<div class="container">
    <div class="header">
        <a href="{{ path('app_ticket_new') }}"><div class="sell-ticket">VENDRE MON TICKET</div></a>
        <div class="logo">
            <img src="{{ asset('images/logo.png') }}" alt="Stadium Xchange">
        </div>
        <div class="login">
            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                <a href="{{ path('mySpace') }}">Mon Espace</a> <br><br>
                <a href="{{ path('logout') }}">Se Déconnecter</a>
            {% else %}
                <a href="{{ path('login') }}">Se Connecter</a> <br><br>
                <a href="{{ path('register') }}">Créer un compte</a>
            {% endif %}
        </div>
    </div>

    <div class="search-bar">
    <form action="#" method="GET">
            <input type="text" name="query" placeholder="Rechercher une équipe ou une compétition" class="search-input">
            <button type="submit" class="search-button">Rechercher</button>
        </form>
    </div>

    <div class="tickets">
    {% for ticket in tickets %}
        <a href="{{ path('app_ticket_show', {'id': ticket.id}) }}">
            <div class="ticket">
            <h2>
                <img src="{{teamsLogo[ticket.homeTeam ]|default() }}" alt="{{ ticket.homeTeam }}" class="team-logo" data-team="{{ ticket.homeTeam }}">
                <span class="team-name">{{ ticket.homeTeam }}</span>
                vs
                <span class="team-name">{{ ticket.awayTeam }}</span>
                <img src="{{teamsLogo[ticket.awayTeam ]|default() }}" alt="{{ ticket.awayTeam }}" class="team-logo" data-team="{{ ticket.awayTeam }}">
            </h2>
                <p>Date et heure : {{ ticket.dateTime|date('d/m/Y H:i') }}</p>
                <p>Stade : {{ ticket.stadium }}</p>
                <p>Prix : {{ ticket.price }} €</p>
                {% if ticket.owner %}
                    <p>Mis en vente par : {{ ticket.owner.lastname }} {{ ticket.owner.firstname }}</p>
                {% else %}
                    <p>Mis en vente par : Inconnu</p>
                {% endif %}
                <p>Compétition : {{ ticket.competition }}</p>

                    
            </div>
        </a>
    {% else %}
        <p>Aucun ticket disponible pour le moment.</p>
    {% endfor %}
</div>
</div>

{% block javascripts %}

{% endblock %}
{% endblock %}

